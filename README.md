# Тестовое задание 

В проекте используется Docker Compose для настройки и запуска базы данных. Для этого выполните следующие шаги:

1. Перейдите в каталог проекта
2. Запустите Docker Compose:  docker-compose up -d или в IDE.
Эта команда запустит контейнеры, описанные в файле `docker-compose.yml`, в фоновом режиме.

## Подключение к базе данных

После запуска контейнеров база данных будет доступна на [укажите адрес, например, `localhost:5432` для PostgreSQL]. Убедитесь, что вы используете правильные параметры подключения, указанные в вашем приложении, такие как:

- **Хост**: `localhost`
- **Порт**: `5432` (или другой, если вы используете другой порт)
- **Имя пользователя**: `postgres` (или ваш вариант)
- **Пароль**: `postgres` (или ваш вариант)
- **Имя базы данных**: `testapp` (или ваш вариант)

### Сборка проекта

Выполните сборку проекта с помощью Maven: mvn clean install

### Миграции

Данные в базу данных вставляются с помощью миграций.
- При запуске приложения миграции будут автоматически применены к базе данных.

### Использование

1. Аутентификация: POST http://localhost:8080/auth/sign-in 

Миграцией были добавлены 2 пользователя:
- Email: ivan@example.com, password: password123
- Email: petr@example.com, password: password456

2. Регистрация: POST http://localhost:8080/auth/sign-up 

Пример тела запроса:

``` 
json
{
"name": "Name",
"dateOfBirth": "2000-04-01",
"email": "example@example.com",
"password": "password789"
}
``` 

3. Поиск пользователя: GET http://localhost:8080/users/search

Возможен поиск по трем параметрам:
- name 
- email
- phone

4. Поиск пользователя по id: GET http://localhost:8080/users/{id}
5. Обновление данных пользователя: PUT http://localhost:8080/users

Пользоователь может обновить только свои данные, пример тела запроса:

``` 
json
{
"name": "Example",
"dateOfBirth": "2020-05-15"
}
```

6. Работа с почтой: http://localhost:8080/users/email

Пользователь может взаимодействовать только со своей почтой, примеры запросов:

- Добавить, POST
``` 
json
{
"email": "Example"
}
```

- Обновить, PATCH
``` 
json
{
"oldEmail": "old@example.com",
"newEmail": "new@example.com"
}
```

- Удалить, DELETE
``` 
json
{
"email": "Example"
}
```

7. Работа с телефоном: http://localhost:8080/users/phone

Пользователь может взаимодействовать только со своим телефоном, примеры запросов:

- Добавить, POST
``` 
json
{
"phone": "792078654328"
}
```

- Обновить, PATCH
``` 
json
{
"oldPhone": "792078654328",
"newPhone": "453278654328"
}
```

- Удалить, DELETE
``` 
json
{
"phone": "792078654328"
}
```

8. Перевод денег от аутентифицированного пользователя: POST http://localhost:8080/account/transfer

Пример тела запроса:
``` 
json
{
"userId": 2,
"amount": 123
}
```